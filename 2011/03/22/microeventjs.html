<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>MicroEvent.js - micro event emitter in less than 20lines</title>
   <meta name="author" content="Jerome Etienne" />

   <!-- syntax highlighting CSS -->
   <link rel="stylesheet" href="/css/syntax.css" type="text/css" />
   <!-- Homepage CSS -->
   <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />
   <!-- Typekit -->
   <script type="text/javascript" src="http://use.typekit.com/jpd0pfm.js"></script>
   <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
</head>
<body>

<div class="site">
  <div class="title">
    <a href="/">Jerome Etienne</a>
    <a class="extra" href="/">home</a>
  </div>
  
  <div id="post">
<h1>MicroEvent.js - micro event emitter in less than 20lines</h1>

<p class='meta'>22 March 2011 -</p>


<p><em>MicroEvent.js</em> is a event emitter library which provides the
<a href="http://en.wikipedia.org/wiki/Observer_pattern">observer pattern</a> to javascript objects.
It works on node.js and browser. It is a single .js file containing
a <a href="https://github.com/jeromeetienne/microevent.js/blob/master/microevent.js#L12-29">20 lines class</a>
(only 321-bytes after minification+gzip).</p>

<h1>How to Use It</h1>

<p>You need a single file <a href="https://github.com/jeromeetienne/microevent.js/raw/master/microevent.js">microevent.js</a>.
Include it in a webpage via the usual script tag.</p>

<pre><code>&lt;script src="microevent.js"&gt;&lt;/script&gt;
</code></pre>

<p>To include it in a nodejs code isnt much harder</p>

<pre><code>var MicroEvent = require('./microevent.js')
</code></pre>

<p>Now suppose you got a class <code>Foobar</code>, and you wish it to support the observer partern. do</p>

<pre><code>MicroEvent.mixin(Foobar)
</code></pre>

<p>That's it. The repository contains an <a href="https://github.com/jeromeetienne/microevent.js/blob/master/examples/example.html">example in browser</a>
and an <a href="https://github.com/jeromeetienne/microevent.js/blob/master/examples/example.js">example in nodejs</a>.
Both use the same code in different contexts. Let me walk you thru it.</p>

<h1>Example</h1>

<p>First we define the class which gonna use MicroEvent.js. This is a ticker, it is
triggering 'tick' event every second, and add the current date as parameter</p>

<pre><code>var Ticker = function(){
    var self = this;
    setInterval(function(){
        self.trigger('tick', new Date());
    }, 1000);
};
</code></pre>

<p>We mixin <em>MicroEvent</em> into <em>Ticker</em> and we are all set.</p>

<pre><code>MicroEvent.mixin(Ticker);
</code></pre>

<p>Now lets actually use the <em>Ticker</em> Class. First, create the object.</p>

<pre><code>var ticker = new Ticker();
</code></pre>

<p>and bind our <em>tick</em> event with its data parameter</p>

<pre><code>ticker.bind('tick', function(date) {
    console.log('notified date', date);
});
</code></pre>

<p>And you will see this output:</p>

<pre><code>notified date Tue, 22 Mar 2011 14:43:41 GMT
notified date Tue, 22 Mar 2011 14:43:42 GMT
...
</code></pre>

<h1>Motivation</h1>

<p>I needed a event emitter in js... something generic which works browser and server, cross browser. The solution
found were too complex for my test.</p>

<p>When i have seen john resig <a href="http://ejohn.org/blog/javascript-micro-templating/">micro templating</a>
or <a href='http://ejohn.org/blog/simple-javascript-inheritance/'>simple inheritance</a>, i loved it. It is
simple, short, self contained, easy to understand... so <strong>eleguant</strong>. i thought "this is no more a dependancy
because i could maintain it if needed". Now i try to apply those principles to my own work.</p>

<h1>Conclusion</h1>

<p>MicroEvent.js is available on github <a href='https://github.com/jeromeetienne/microevent.js'>here</a>
under <a href='https://github.com/jeromeetienne/microevent.js/blob/master/MIT-LICENSE.txt'>MIT license</a>.
If you hit bugs, fill issues on github.
Feel free to fork, modify and have fun with it :)</p>

</div>

<div id="related">
  <h2>Related Posts</h2>
  <ul class="posts">
    
      <li><span>10 Mar 2011</span> &raquo; <a href="/2011/03/10/initial-post.html">Initial Post</a></li>
    
  </ul>
</div>
  
  <div class="footer">
    <div class="contact">
      <p>
        Jerome Etienne<br />
        jerome.etienne@gmail.com
      </p>
    </div>
    <div class="contact">
      <p>
        <a href="http://github.com/jeromeetienne/">github.com/jeromeetienne</a><br />
        <a href="http://twitter.com/jerome_etienne/">twitter.com/jerome_etienne</a><br />
      </p>
    </div>
  </div>
</div>

<a href="http://github.com/jeromeetienne"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" /></a>

</body>
</html>
